<%- serviceWorkerHelper %>;

// FIXME: Put this into asset helper
<%_ const SERVICE_WORKER_ASSETS = ["app.css", "app.js", "list.js", "list.css", "vendors~list.js", "story.js", "story.css", "vendors~story.css"] _%>

const REQUIRED_ASSETS = [
  <%_ SERVICE_WORKER_ASSETS.map(x => assetPath(x)).map(x => { _%>
  <%_ if (x) { %>  "<%=x%>",<%_ } %>
  <%_ }) _%>
  // Put fonts here
  {url: '/shell.html', revision: '<%= assetHash("app.js") %>'}
];

const workbox = initializeQServiceWorker(self, {
  routes: <%- JSON.stringify(routes) %>,
  assets: REQUIRED_ASSETS,
  hostname: <%- JSON.stringify(hostname) %>
});

workbox.router.registerRoute('/route-data.json', workbox.strategies.networkFirst());
